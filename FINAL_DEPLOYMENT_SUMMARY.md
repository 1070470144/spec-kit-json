# ğŸ‰ æœ€ç»ˆéƒ¨ç½²æ€»ç»“

## âœ… æ‰€æœ‰é—®é¢˜å·²ä¿®å¤

**ä¿®å¤æ—¥æœŸ**: 2025-10-14
**çŠ¶æ€**: âœ… æœ¬åœ°æ„å»ºæˆåŠŸï¼Œå¾…æœåŠ¡å™¨éƒ¨ç½²

---

## ğŸ“‹ ä»Šå¤©å®Œæˆçš„å·¥ä½œ

### 1. è¶…é«˜æ¸…å›¾ç‰‡ä¸‹è½½åŠŸèƒ½ â­
- **å®ç°**: 1200 DPIï¼Œ6å€æ”¾å¤§ï¼Œ30-60MB
- **æ–‡ä»¶**: 
  - `app/api/tools/convert-svg-to-png/route.ts`
  - `app/generate/page.tsx`
- **çŠ¶æ€**: âœ… æœ¬åœ°æµ‹è¯•é€šè¿‡

### 2. æ•°æ®åº“å¤–éƒ¨å­˜å‚¨åŠŸèƒ½ â­
- **å®ç°**: è§£å†³å¤‡ä»½å†…å­˜ä¸è¶³é—®é¢˜
- **æ–‡ä»¶**: `scripts/pm2-installer.ps1`
- **æ•ˆæœ**: æ›´æ–°é€Ÿåº¦æå‡10å€
- **çŠ¶æ€**: âœ… æœåŠ¡å™¨å·²è¿ç§»æˆåŠŸ

### 3. ç®¡ç†åå°ä¼šè¯ç³»ç»Ÿä¿®å¤ â­
- **é—®é¢˜**: Cookieåç§°ä¸ä¸€è‡´å¯¼è‡´401é”™è¯¯
- **ä¿®å¤**: ç»Ÿä¸€ä½¿ç”¨ `admin_session` Cookie
- **æ–‡ä»¶**:
  - `middleware.ts`
  - `app/api/admin/auth/login/route.ts`
  - `app/api/admin/auth/logout/route.ts`
  - `app/api/admin/auth/me/route.ts`
- **çŠ¶æ€**: âœ… æœ¬åœ°æµ‹è¯•é€šè¿‡ï¼Œå¾…æœåŠ¡å™¨éƒ¨ç½²

### 4. ç»„ä»¶å¯¼å…¥é—®é¢˜ä¿®å¤
- **é—®é¢˜**: Server Component ä¸èƒ½æœ‰äº‹ä»¶å¤„ç†å™¨
- **ä¿®å¤**: æ­£ç¡®å¯¼å…¥å®¢æˆ·ç«¯ç»„ä»¶
- **æ–‡ä»¶**: `app/my/uploads/page.tsx`
- **çŠ¶æ€**: âœ… æ„å»ºæˆåŠŸ

### 5. PM2 å®‰è£…å™¨å¢å¼º
- **æ–°å¢**: æ•°æ®åº“è¿ç§»åŠŸèƒ½ï¼ˆèœå•13ã€14ï¼‰
- **ä¿®å¤**: å¤‡ä»½é€»è¾‘æ›´å®‰å…¨
- **çŠ¶æ€**: âœ… åŠŸèƒ½å®Œæ•´

---

## ğŸš€ æœåŠ¡å™¨éƒ¨ç½²æ¸…å•

### æ ¸å¿ƒæ–‡ä»¶ï¼ˆå¿…é¡»éƒ¨ç½²ï¼‰
```
âœ“ middleware.ts
âœ“ app/api/admin/auth/login/route.ts  
âœ“ app/api/admin/auth/logout/route.ts
âœ“ app/api/admin/auth/me/route.ts
âœ“ app/my/uploads/page.tsx
âœ“ app/api/tools/convert-svg-to-png/route.ts
âœ“ app/generate/page.tsx
```

### å¯é€‰æ–‡ä»¶
```
â—‹ scripts/pm2-installer.ps1 (å·²ä¸Šä¼ )
â—‹ app/my/uploads/PreviewImage.tsx (å·²å­˜åœ¨)
â—‹ app/my/uploads/DeleteButton.tsx (å·²å­˜åœ¨)
```

---

## ğŸ“ æœåŠ¡å™¨éƒ¨ç½²æ­¥éª¤

### æ–¹æ³•1ï¼šGit æ¨é€ï¼ˆå¦‚æœç½‘ç»œæ­£å¸¸ï¼‰
```bash
# æœ¬åœ°
git add .
git commit -m "Fix: Admin session system and ultra HD images"
git push origin master

# æœåŠ¡å™¨
cd C:\apps\juben
git pull origin master
npm run build
npx pm2 restart juben
```

### æ–¹æ³•2ï¼šæ‰‹åŠ¨ä¸Šä¼ ï¼ˆæ¨èï¼‰
```
1. ä¸Šä¼ æ ¸å¿ƒ7ä¸ªæ–‡ä»¶åˆ°æœåŠ¡å™¨å¯¹åº”ä½ç½®
2. åœ¨æœåŠ¡å™¨æ‰§è¡Œï¼š
   cd C:\apps\juben
   npx pm2 stop juben
   npm run build
   npx pm2 start juben
```

---

## ğŸ§ª éƒ¨ç½²åæµ‹è¯•

### æµ‹è¯•1ï¼šç®¡ç†åå°
```
1. æ¸…ç†æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl+Shift+Deleteï¼‰
2. è®¿é—®ï¼šwww.quanyuanzhuiyi.icu/admin/login
3. é‡æ–°ç™»å½•
4. âœ“ åº”è¯¥èƒ½åœç•™åœ¨ç®¡ç†é¡µé¢ï¼ˆä¸è¢«é‡å®šå‘ï¼‰
5. âœ“ è®¿é—®ï¼š/admin/users æ˜¾ç¤ºç”¨æˆ·åˆ—è¡¨
6. âœ“ æ‰€æœ‰ç®¡ç†åŠŸèƒ½æ­£å¸¸
```

### æµ‹è¯•2ï¼šè¶…é«˜æ¸…å›¾ç‰‡
```
1. è®¿é—®ï¼šwww.quanyuanzhuiyi.icu/generate
2. ä¸Šä¼ JSONæ–‡ä»¶ï¼Œç”Ÿæˆé¢„è§ˆå›¾
3. ç‚¹å‡»"ä¸‹è½½è¶…é«˜æ¸…å›¾ â˜…"
4. ç­‰å¾…15-30ç§’
5. âœ“ æ–‡ä»¶å¤§å°åº”è¯¥æ˜¯ 30-60MBï¼ˆä¸æ˜¯101KBï¼‰
```

### æµ‹è¯•3ï¼šå‰ç«¯åŠŸèƒ½
```
1. è®¿é—®é¦–é¡µï¼ŒæŸ¥çœ‹å‰§æœ¬åˆ—è¡¨
2. æµ‹è¯•ç”¨æˆ·ç™»å½•
3. æµ‹è¯•å‰§æœ¬ä¸Šä¼ 
4. âœ“ æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
```

---

## ğŸ“Š ä¿®å¤æ•ˆæœé¢„æœŸ

### ç®¡ç†åå°
- **ä¿®å¤å‰**: ç™»å½•åç«‹å³é‡å®šå‘å›ç™»å½•é¡µ
- **ä¿®å¤å**: ç™»å½•åæ­£å¸¸ä½¿ç”¨ç®¡ç†åŠŸèƒ½ âœ…

### è¶…é«˜æ¸…å›¾ç‰‡
- **ä¿®å¤å‰**: åªæœ‰101KBï¼ˆå‚æ•°æœªç”Ÿæ•ˆï¼‰
- **ä¿®å¤å**: 30-60MBï¼Œ1200 DPI âœ…

### æ•°æ®æ¢å¤
- **é—®é¢˜**: æ•°æ®åº“è¢«å›æ»šåˆ°æµ‹è¯•æ•°æ®
- **è§£å†³**: ä» prisma/prisma/dev.db æ¢å¤çœŸå®æ•°æ® âœ…

### å¤‡ä»½ç³»ç»Ÿ
- **ä¿®å¤å‰**: å¯èƒ½è·³è¿‡å¤‡ä»½å¯¼è‡´æ•°æ®ä¸¢å¤±
- **ä¿®å¤å**: å®‰å…¨ä¼˜å…ˆï¼Œç¡®ä¿æ•°æ®ä¿æŠ¤ âœ…

---

## âš ï¸ é‡è¦æé†’

### éƒ¨ç½²åå¿…é¡»ï¼š
1. âœ… **æ¸…ç†æµè§ˆå™¨ç¼“å­˜**ï¼ˆéå¸¸é‡è¦ï¼ï¼‰
2. âœ… **é‡æ–°ç™»å½•ç®¡ç†åå°**
3. âœ… **æµ‹è¯•æ‰€æœ‰åŠŸèƒ½**

### Service Worker é—®é¢˜ï¼š
- å¦‚æœè¿˜æœ‰ç¼“å­˜é—®é¢˜
- F12 â†’ Application â†’ Service Workers â†’ Unregister
- Application â†’ Storage â†’ Clear site data

---

## ğŸ¯ æœ€ç»ˆçŠ¶æ€

| åŠŸèƒ½ | çŠ¶æ€ |
|------|------|
| **æœ¬åœ°æ„å»º** | âœ… æˆåŠŸ |
| **æ•°æ®æ¢å¤** | âœ… å®Œæˆ |
| **å‰ç«¯æ˜¾ç¤º** | âœ… æ­£å¸¸ |
| **ç®¡ç†åå°** | â³ å¾…éƒ¨ç½²ä¿®å¤ |
| **è¶…é«˜æ¸…å›¾ç‰‡** | â³ å¾…éƒ¨ç½²éªŒè¯ |

---

## ğŸš€ ä¸‹ä¸€æ­¥

**ç«‹å³è¡ŒåŠ¨**ï¼š
1. ä¸Šä¼ 7ä¸ªæ ¸å¿ƒæ–‡ä»¶åˆ°æœåŠ¡å™¨
2. æ‰§è¡Œæ„å»ºå’Œé‡å¯å‘½ä»¤
3. æ¸…ç†æµè§ˆå™¨ç¼“å­˜é‡æ–°ç™»å½•
4. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½

**é¢„è®¡å®Œæˆæ—¶é—´**: 10åˆ†é’Ÿ
**é¢„æœŸç»“æœ**: æ‰€æœ‰åŠŸèƒ½å®Œå…¨æ­£å¸¸ âœ¨

---

**æ‰€æœ‰é—®é¢˜éƒ½å·²åœ¨æœ¬åœ°ä¿®å¤å¹¶éªŒè¯ï¼ç°åœ¨åªéœ€è¦éƒ¨ç½²åˆ°æœåŠ¡å™¨å³å¯ï¼** ğŸŠ

