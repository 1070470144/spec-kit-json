# 验证清单：核心页面 M3 优化

## 开发验证

### ✅ 代码质量
- [x] 无 TypeScript 错误
- [x] 无 ESLint 警告
- [x] 所有组件有类型定义
- [x] 代码符合项目规范

### ✅ 文件完整性
- [x] `app/globals.css` - M3 组件类
- [x] `app/scripts/page.tsx` - 已优化
- [x] `app/scripts/ScriptCardActions.tsx` - 已优化
- [x] `app/leaderboard/page.tsx` - 已优化
- [x] `app/upload/page.tsx` - 已优化

## 设计规范验证

### M3 颜色系统 ✅
- [x] Primary: `#6750A4` 用于主按钮和活跃状态
- [x] Surface: `#FFFBFE` 用于卡片背景
- [x] On-Surface: `#1C1B1F` 用于主要文字
- [x] Surface-on-variant: `#49454F` 用于次要文字
- [x] Outline: `#79747E` 用于边框
- [x] 所有颜色使用令牌而非硬编码

### M3 排版系统 ✅
- [x] Headline Small (24px) - 页面标题
- [x] Title Large (22px) - 卡片标题
- [x] Title Medium (16px) - 列表项标题
- [x] Body Medium (14px) - 正文
- [x] Body Small (12px) - 次要信息
- [x] Label Large (14px) - 按钮文本

### M3 形状系统 ✅
- [x] 按钮: 8px (rounded-sm)
- [x] 卡片: 12px (rounded-md)
- [x] 输入框: 8px (rounded-sm)
- [x] 徽章: 圆形 (rounded-full)

### M3 高度系统 ✅
- [x] 卡片: elevation-2
- [x] Top 1 徽章: elevation-2
- [x] Top 2 徽章: elevation-1
- [x] 其他元素: 适当阴影

## 页面功能验证

### 剧本列表页 (/scripts)
- [ ] 搜索框输入正常
- [ ] 搜索提交正常
- [ ] 清除搜索正常
- [ ] 卡片显示正确
- [ ] 图片轮播正常
- [ ] 点赞功能正常
- [ ] 收藏功能正常
- [ ] 查看详情跳转正常
- [ ] 分页上一页/下一页正常
- [ ] 禁用状态显示正确

### 排行榜页 (/leaderboard)
- [ ] 按点赞切换正常
- [ ] 按收藏切换正常
- [ ] 按下载切换正常
- [ ] 排名显示正确
- [ ] Top 1/2/3 样式区分明显
- [ ] 列表项点击跳转正常
- [ ] 统计数字显示正确
- [ ] 空状态显示正确

### 上传页 (/upload)
- [ ] 标题输入正常
- [ ] 作者输入正常
- [ ] JSON 文件选择正常
- [ ] 图片选择正常（0-3张）
- [ ] 图片预览显示正确
- [ ] 超过3张提示正确
- [ ] 提交验证正确
- [ ] 提交成功跳转正常
- [ ] 错误提示清晰
- [ ] 返回列表正常

## 响应式验证

### 移动端 (< 640px)
- [ ] 剧本列表：单列显示
- [ ] 排行榜：切换组垂直排列
- [ ] 上传页：表单垂直排列
- [ ] 所有文本可读
- [ ] 按钮不溢出

### 平板 (640px - 1024px)
- [ ] 剧本列表：2列显示
- [ ] 排行榜：切换组水平排列
- [ ] 上传页：表单水平排列
- [ ] 布局合理

### 桌面 (> 1024px)
- [ ] 剧本列表：3列显示
- [ ] 所有元素对齐正确
- [ ] 最大宽度限制生效

## 无障碍验证

### 语义化 HTML ✅
- [x] 页面标题使用 `<h1>`
- [x] 章节标题使用适当层级
- [x] 表单 label 正确关联
- [x] 按钮和链接有描述性文本

### ARIA 属性 ✅
- [x] 搜索框有 `aria-label="搜索剧本"`
- [x] 分页按钮有 `aria-disabled`
- [x] 点赞/收藏按钮有 `aria-label`
- [x] 文件输入有关联 `htmlFor`/`id`

### 键盘导航
- [ ] Tab 可遍历所有交互元素
- [ ] Tab 顺序符合逻辑
- [ ] Enter/Space 可激活按钮
- [ ] Focus 状态清晰可见
- [ ] 分段按钮可键盘切换

### 颜色对比度 ✅
- [x] Primary vs White: ≥ 4.5:1
- [x] Surface-on vs Surface: ≥ 4.5:1
- [x] 所有文本可读

## 性能验证

### SSR
- [ ] 剧本列表服务端渲染
- [ ] 排行榜服务端渲染
- [ ] 首次加载无白屏
- [ ] 数据预取正常

### 客户端
- [ ] 轮播组件 hydration 正常
- [ ] 操作按钮交互流畅
- [ ] 上传表单响应正常
- [ ] 无不必要的重渲染

### 加载速度
- [ ] 剧本列表加载 < 2秒
- [ ] 排行榜加载 < 2秒
- [ ] 上传页加载 < 1秒
- [ ] 图片预览生成 < 100ms

## 浏览器兼容性

### Chrome (最新版本)
- [ ] 所有功能正常
- [ ] 样式显示正确
- [ ] M3 样式渲染正确
- [ ] 无控制台错误

### Firefox (最新版本)
- [ ] 所有功能正常
- [ ] 样式显示正确
- [ ] M3 样式渲染正确
- [ ] 无控制台错误

### Safari (最新版本)
- [ ] 所有功能正常
- [ ] 样式显示正确
- [ ] M3 样式渲染正确
- [ ] 无控制台错误

### Edge (最新版本)
- [ ] 所有功能正常
- [ ] 样式显示正确
- [ ] M3 样式渲染正确
- [ ] 无控制台错误

## 视觉一致性检查

### 与首页对比
- [ ] 颜色令牌使用一致
- [ ] 排版系统一致
- [ ] 按钮样式一致
- [ ] 卡片样式一致
- [ ] 圆角规范一致
- [ ] 阴影系统一致

### 页面间对比
- [ ] 剧本列表 vs 排行榜：标题样式一致
- [ ] 剧本列表 vs 上传页：按钮样式一致
- [ ] 所有页面：间距系统一致

## 回归测试

### 现有功能
- [ ] 导航栏正常
- [ ] 用户登录/退出正常
- [ ] 首页未受影响
- [ ] API 端点正常
- [ ] 数据库查询正常

## 测试命令

```bash
# 开发环境
cd xueran-juben-project
npm run dev
# 访问以下页面：
# http://localhost:3000/scripts
# http://localhost:3000/leaderboard
# http://localhost:3000/upload

# 构建测试
npm run build
npm start

# Lint 检查
npm run lint

# 类型检查
npx tsc --noEmit
```

## 测试用例

### 剧本列表
1. 访问 `/scripts`
2. 在搜索框输入关键词
3. 点击搜索按钮
4. 验证结果显示
5. 点击清除按钮
6. 点击点赞按钮（需登录）
7. 点击收藏按钮（需登录）
8. 点击查看详情
9. 测试分页导航

### 排行榜
1. 访问 `/leaderboard`
2. 点击"按点赞"
3. 验证排行榜显示
4. 点击"按收藏"
5. 点击"按下载"
6. 验证 Top 1/2/3 样式
7. 点击列表项跳转

### 上传
1. 访问 `/upload`（需登录）
2. 输入标题
3. 输入作者（可选）
4. 选择 JSON 文件
5. 选择图片（0-3张）
6. 验证预览显示
7. 点击提交
8. 验证成功/失败提示

## 验收标准

**所有 ✓ 项目都通过测试后，该功能才算完成。**

**最低要求**:
- 所有 "开发验证" 通过
- 所有 "设计规范验证" 通过
- 所有 "页面功能验证" 通过
- 至少 1 种浏览器的 "浏览器兼容性" 通过

**理想状态**:
- 所有验证项目全部通过
