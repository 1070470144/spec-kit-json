# Spec 026: 修复同时上传图片和预览图问题

## 问题描述
用户在上传页面同时上传了自己的图片和生成了自动预览图，但提交后在"我的上传"中只看到了用户上传的图片，自动生成的预览图丢失了。

## 根本原因
上传逻辑中有一个错误的条件判断：
```typescript
if (autoPreviewUrl && images.length === 0)
```
这个条件限制了**只有在没有用户图片时**才会上传预览图，导致"二选一"而不是"都保存"。

## 解决方案
移除 `images.length === 0` 条件，让自动预览图总是被上传（如果存在）。

## 修改的文件
- `app/upload/page.tsx`
  - 第 95 行：移除条件限制

## 修改内容

### 修改前
```typescript
// 如果有自动生成的预览图且没有用户上传图片，则上传预览图
if (autoPreviewUrl && images.length === 0) {
  // ... 上传预览图
}
```

### 修改后
```typescript
// 如果有自动生成的预览图，也上传它（作为额外的图片）
if (autoPreviewUrl) {
  // ... 上传预览图
}
```

## 预期行为
- ✅ 只上传用户图片 → 保存用户图片
- ✅ 只生成预览图 → 保存预览图
- ✅ **同时有两者 → 同时保存用户图片和预览图**

## 验收检查
- [x] 创建 spec 文档
- [ ] 修改上传条件判断
- [ ] 测试三种场景（用户图片/预览图/两者都有）
- [ ] 验证"我的上传"页面显示

## 相关文档
- [完整规格说明](./spec.md)

