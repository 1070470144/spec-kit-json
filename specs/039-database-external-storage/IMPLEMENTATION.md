# æ•°æ®åº“å¤–éƒ¨å­˜å‚¨ - PM2 å®‰è£…å™¨é›†æˆå®ç°

## ğŸ“‹ å®ç°è®¡åˆ’

åœ¨ `pm2-installer.ps1` ä¸­é›†æˆæ•°æ®åº“å¤–éƒ¨å­˜å‚¨åŠŸèƒ½ï¼Œæ”¯æŒï¼š
- è‡ªåŠ¨æ•°æ®åº“è¿ç§»
- æœ¬åœ°å’Œç”Ÿäº§ç¯å¢ƒé€šç”¨
- ä¸€é”®åˆ‡æ¢åˆ°å¤–éƒ¨å­˜å‚¨
- å…¼å®¹ç°æœ‰éƒ¨ç½²æµç¨‹

## ğŸ”§ å®ç°æ–¹æ¡ˆ

### 1. æ·»åŠ æ–°çš„èœå•é€‰é¡¹

åœ¨ä¸»èœå•ä¸­æ·»åŠ ï¼š
```
13) è¿ç§»æ•°æ®åº“åˆ°å¤–éƒ¨å­˜å‚¨
14) æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
```

### 2. æ ¸å¿ƒåŠŸèƒ½å‡½æ•°

#### 2.1 æ£€æŸ¥æ•°æ®åº“å­˜å‚¨çŠ¶æ€
```powershell
function Check-DatabaseLocation($cfg) {
    # æ£€æŸ¥å½“å‰æ•°æ®åº“ä½ç½®
    # è¿”å›: internal, external, or mixed
}
```

#### 2.2 è¿ç§»æ•°æ®åº“åˆ°å¤–éƒ¨
```powershell
function Step-MigrateToExternalDB($cfg) {
    # å®Œæ•´çš„è¿ç§»æµç¨‹
}
```

#### 2.3 æ›´æ–°ç¯å¢ƒå˜é‡ç”Ÿæˆ
```powershell
function Step-GenerateEnv($cfg) {
    # æ”¯æŒå¤–éƒ¨æ•°æ®åº“è·¯å¾„
}
```

#### 2.4 æ›´æ–°å¤‡ä»½é€»è¾‘
```powershell
function Step-Backup($cfg) {
    # æ™ºèƒ½æ£€æµ‹æ•°æ®åº“ä½ç½®å¹¶å¤‡ä»½
}
```

### 3. æœ¬åœ°å¼€å‘æ”¯æŒ

æ”¯æŒç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ï¼š
```env
# ç”Ÿäº§ç¯å¢ƒ
DATABASE_URL="file:C:/apps/juben-data/database/juben.db"

# æœ¬åœ°å¼€å‘ç¯å¢ƒ
DATABASE_URL="file:../juben-data/database/juben.db"
```

## ğŸ“ ä¿®æ”¹æ¸…å•

### éœ€è¦ä¿®æ”¹çš„å‡½æ•°
1. âœ… `Step-GenerateEnv` - æ”¯æŒå¤–éƒ¨æ•°æ®åº“é…ç½®
2. âœ… `Step-Backup` - æ™ºèƒ½å¤‡ä»½é€»è¾‘
3. âœ… `Step-CloneOrPull` - ç§»é™¤æ•°æ®åº“å¤‡ä»½é€»è¾‘
4. âœ… `Menu` - æ–°å¢èœå•é€‰é¡¹
5. âœ… æ–°å¢ `Step-MigrateToExternalDB` - è¿ç§»åŠŸèƒ½
6. âœ… æ–°å¢ `Check-DatabaseLocation` - çŠ¶æ€æ£€æŸ¥

### æ–°å¢é…ç½®é€‰é¡¹
```powershell
$cfg.UseExternalDB = $true/$false
$cfg.DataDir = "C:\apps\juben-data"  # æˆ–ç›¸å¯¹è·¯å¾„
```
